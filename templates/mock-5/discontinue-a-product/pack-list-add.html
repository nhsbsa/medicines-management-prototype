{% extends "base.html" %}
{% block title %}
Submit a new product | Portal | NHSBSA
{% endblock %}
{% block content %}

<div class="nhsuk-back-link nhsuk-u-margin-bottom-4">
  <a class="nhsuk-back-link__link" href="how-long-oos.html" id="back-link">
    <svg class="nhsuk-icon nhsuk-icon__chevron-left" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" height="24" width="24">
      <path d="M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z"></path>
    </svg>
    Go back to how long will the product or pack be out of stock</a>
</div>

<h1><span class="nhsuk-caption-l" id="discontinue-reason">
                Discontinue
              <span class="nhsuk-u-visually-hidden"> - </span>
            </span>Select discontinued packs</h1>

<p>This search contains all packs currently listed on dm+d. If you need to choose a whole product you must select all packs relating to that product from the search results.</p>

     <div class="nhsuk-form-group">

       <details class="nhsuk-details">
         <summary class="nhsuk-details__summary">
    <span class="nhsuk-details__summary-text">
      Filter results
    </span>
         </summary>
         <div class="nhsuk-details__text">
           <label class="nhsuk-label" for="example">Search term (optional)</label>
           <input class="nhsuk-input" id="example" name="example" type="text">
         <button class="nhsuk-button nhsuk-button--secondary nhsuk-u-margin-top-4" type="submit">
           Search
           <span class="nhsuk-u-visually-hidden">Search</span>
         </button>
         </div>
       </details>

    <div class="nhsuk-inset-text nhsuk-u-margin-top-4" id="inset-text-input">
      <span class="nhsuk-u-visually-hidden">Information: </span>
      <p>Select single packs from the search results or use this link to <a href="#" class="nhsuk-link nhsuk-link--no-visited-state" onclick="checkAllBoxes()">select all</a>.</p>

<!--      not sure if we need this extra detail? MPL 20/10/2022  -->
    </div>

       <div class="nhsuk-body-m flex--space-between" style="display: flex">
       <div class="nhsuk-u-visually-hidden">Currently viewing</div>
       <div id="pageAndResultCount">Page 1 of 1 (5 results)</div>
       </div>


    <table role="table" class="nhsuk-table-responsive nhsuk-u-margin-bottom-5">
      <thead role="rowgroup" class="nhsuk-table__head">
      <tr role="row">
        <th role="columnheader" class="" scope="col">
          Product name
        </th>
        <th role="columnheader" class="" scope="col">
          Pack size
        </th>
        <th role="columnheader" class="" scope="col">
          Subpack
        </th>
        <th role="columnheader" class="" scope="col">
          Price
        </th>
        <th role="columnheader" class="" scope="col">
          Select
        </th>
      </tr>
      </thead>
      <tbody class="nhsuk-table__body">
      <tr role="row" class="nhsuk-table__row">
        <td role="cell" class="nhsuk-table__cell align-middle">
          <span class="nhsuk-table-responsive__heading">Product name </span>Alprazolam
        </td>
        <td role="cell" class="nhsuk-table__cell align-middle">
          <span class="nhsuk-table-responsive__heading">Pack </span>30
        </td>
        <td role="cell" class="nhsuk-table__cell align-middle">
          <span class="nhsuk-table-responsive__heading">Subpack </span>2 &times; 15
        </td>
        <td role="cell" class="nhsuk-table__cell align-middle">
          <span class="nhsuk-table-responsive__heading">Price </span><span><span>299</span>p</span>
        <td>
          <span class="nhsuk-table-responsive__heading">Select </span>
<!--          <div class="govuk-checkboxes govuk-checkboxes&#45;&#45;small" data-module="govuk-checkboxes">-->
<!--            <div class="govuk-checkboxes__item">-->
<!--              <input class="govuk-checkboxes__input" id="organisation" name="organisation" type="checkbox" value="hmrc">-->
<!--              <label class="govuk-label govuk-checkboxes__label" for="organisation">-->
<!--                <span class="nhsuk-u-visually-hidden">Product name</span>-->
<!--              </label>-->
<!--            </div>-->
<!--          </div>-->

        <div class="nhsuk-checkboxes">

          <div class="nhsuk-checkboxes__item table-checkbox">
            <input class="nhsuk-checkboxes__input" id="product-name-select" name="select" type="checkbox" value="email">
            <label class="nhsuk-label nhsuk-checkboxes__label" for="product-name-select">
              <span class="nhsuk-u-visually-hidden">Product name</span>
            </label>
          </div>
        </div>

        </td>
      </tr>
      <tr role="row" class="nhsuk-table__row">
        <td role="cell" class="nhsuk-table__cell align-middle">
          <span class="nhsuk-table-responsive__heading">Product name </span>Bupenorphine 100mg capsules
        </td>
        <td role="cell" class="nhsuk-table__cell align-middle">
          <span class="nhsuk-table-responsive__heading">Pack </span>28
        </td>
        <td role="cell" class="nhsuk-table__cell align-middle">
          <span class="nhsuk-table-responsive__heading">Subpack </span>
<!--          need to make sure empty table cells announce something MPL 20/10/22-->
          <span class="nhsuk-u-visually-hidden">No Subpack information</span>
        </td>
        <td role="cell" class="nhsuk-table__cell align-middle">
          <span class="nhsuk-table-responsive__heading">Price </span><span><span>23</span>p</span>
        </td>
        <td>
          <span class="nhsuk-table-responsive__heading">Select </span>
          <div class="nhsuk-checkboxes">

            <div class="nhsuk-checkboxes__item table-checkbox">
              <input class="nhsuk-checkboxes__input" id="product-name-select-2" name="select" type="checkbox" value="email">
              <label class="nhsuk-label nhsuk-checkboxes__label" for="product-name-select">
                <span class="nhsuk-u-visually-hidden">Product name</span>
              </label>
            </div>
          </div>
        </td>
      </tr>
      <tr role="row" class="nhsuk-table__row">
        <td role="cell" class="nhsuk-table__cell align-middle">
          <span class="nhsuk-table-responsive__heading">Product name </span>Protein cornflakes
        </td>
        <td role="cell" class="nhsuk-table__cell align-middle">
          <span class="nhsuk-table-responsive__heading">Pack </span>1
        </td>
        <td role="cell" class="nhsuk-table__cell align-middle">
          <span class="nhsuk-table-responsive__heading">Subpack </span>
          <!--          need to make sure empty table cells announce something MPL 20/10/22-->
          <span class="nhsuk-u-visually-hidden">No Subpack information</span>
        </td>
        <td role="cell" class="nhsuk-table__cell align-middle">
          <span class="nhsuk-table-responsive__heading">Price </span><span><span>99</span>p</span>
        </td>
        <td>
          <span class="nhsuk-table-responsive__heading">Select </span>
          <div class="nhsuk-checkboxes">

            <div class="nhsuk-checkboxes__item table-checkbox">
              <input class="nhsuk-checkboxes__input" id="product-name-select-3" name="select" type="checkbox" value="email">
              <label class="nhsuk-label nhsuk-checkboxes__label" for="product-name-select">
                <span class="nhsuk-u-visually-hidden">Product name</span>
              </label>
            </div>
          </div>
        </td>
      </tr>
      <tr role="row" class="nhsuk-table__row">
        <td role="cell" class="nhsuk-table__cell align-middle">
          <span class="nhsuk-table-responsive__heading">Product name </span>Cymbalta
        </td>
        <td role="cell" class="nhsuk-table__cell align-middle">
          <span class="nhsuk-table-responsive__heading">Pack </span>30
        </td>
        <td role="cell" class="nhsuk-table__cell align-middle">
          <span class="nhsuk-table-responsive__heading">Subpack </span>3 &times; 10
        </td>
        <td role="cell" class="nhsuk-table__cell align-middle">
          <span class="nhsuk-table-responsive__heading">Price </span><span><span>99</span>p</span>
        </td>
        <td>
          <span class="nhsuk-table-responsive__heading">Select </span>
          <div class="nhsuk-checkboxes">

            <div class="nhsuk-checkboxes__item table-checkbox">
              <input class="nhsuk-checkboxes__input" id="product-name-select-4" name="select" type="checkbox" value="email">
              <label class="nhsuk-label nhsuk-checkboxes__label" for="product-name-select">
                <span class="nhsuk-u-visually-hidden">Product name</span>
              </label>
            </div>
          </div>
        </td>
      </tr>
      <tr role="row" class="nhsuk-table__row">
        <td role="cell" class="nhsuk-table__cell align-middle">
          <span class="nhsuk-table-responsive__heading">Product name </span>Alprazolam
        </td>
        <td role="cell" class="nhsuk-table__cell align-middle">
          <span class="nhsuk-table-responsive__heading">Pack </span>30
        </td>
        <td role="cell" class="nhsuk-table__cell align-middle">
          <span class="nhsuk-table-responsive__heading">Subpack </span>2 &times; 15
        </td>
        <td role="cell" class="nhsuk-table__cell align-middle">
          <span class="nhsuk-table-responsive__heading">Price </span><span><span>299</span>p</span>
        </td>
        <td>
          <span class="nhsuk-table-responsive__heading">Select </span>
          <div class="nhsuk-checkboxes">

            <div class="nhsuk-checkboxes__item table-checkbox">
              <input class="nhsuk-checkboxes__input" id="product-name-select-5s" name="select" type="checkbox" value="email">
              <label class="nhsuk-label nhsuk-checkboxes__label" for="product-name-select">
                <span class="nhsuk-u-visually-hidden">Product name</span>
              </label>
            </div>
          </div>
        </td>
      </tr>
      </tbody>
    </table>
<!--  </div>-->
<!--</div>-->
<div class="nhsuk-grid-row nhsuk-u-margin-top-3">
  <div class="nhsuk-grid-column-full">
    <nav class="govuk-pagination" role="navigation" aria-label="results">
      <div class="govuk-pagination__prev">
        <a class="govuk-link govuk-pagination__link" href="#" rel="prev">
          <svg class="govuk-pagination__icon govuk-pagination__icon--prev" xmlns="http://www.w3.org/2000/svg" height="13" width="15" aria-hidden="true" focusable="false" viewBox="0 0 15 13">
            <path d="m6.5938-0.0078125-6.7266 6.7266 6.7441 6.4062 1.377-1.449-4.1856-3.9768h12.896v-2h-12.984l4.2931-4.293-1.414-1.414z"></path>
          </svg>
          <span class="govuk-pagination__link-title">Previous</span></a>
      </div>
      <ul class="govuk-pagination__list">
        <li class="govuk-pagination__item">
          <a class="govuk-link govuk-pagination__link" href="#" aria-label="Page 1">
            1
          </a>
        </li>
        <li class="govuk-pagination__item govuk-pagination__item--current">
          <a class="govuk-link govuk-pagination__link" href="#" aria-label="Page 2" aria-current="page">
            2
          </a>
        </li>
        <li class="govuk-pagination__item">
          <a class="govuk-link govuk-pagination__link" href="#" aria-label="Page 3">
            3
          </a>
        </li>
      </ul>
      <div class="govuk-pagination__next">
        <a class="govuk-link govuk-pagination__link" href="#" rel="next"> <span class="govuk-pagination__link-title">Next</span> <svg class="govuk-pagination__icon govuk-pagination__icon--next" xmlns="http://www.w3.org/2000/svg" height="13" width="15" aria-hidden="true" focusable="false" viewBox="0 0 15 13">
          <path d="m8.107-0.0078125-1.4136 1.414 4.2926 4.293h-12.986v2h12.896l-4.1855 3.9766 1.377 1.4492 6.7441-6.4062-6.7246-6.7266z"></path>
        </svg></a>
      </div>
    </nav>
<!--    not sure if we need this back button? back link might suffice MPL 20/10/2022 -->
    <a href="pack-list.html"><button class="nhsuk-button nhsuk-u-margin-top-5">Continue with selected packs</button></a>
          </div>
        </div>
     </div>

<script>
<!-- sort back link -->

   let mergerProductChangeLink = localStorage.getItem("change-company-name");

window.onload = function() {
    let whichReason = localStorage.getItem("discontinue-reason");
    if (whichReason == 'no longer manufactured') {
    document.getElementById("back-link").setAttribute('href', "reason");
    document.getElementById("back-link").innerHTML = "<svg class='nhsuk-icon nhsuk-icon__chevron-left' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' aria-hidden='true' height='24' width='24'><path d='M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z'></path></svg>Go back to reason for discontinuation";
    } else if (whichReason == 'out of stock') {
    document.getElementById("back-link").setAttribute('href', "how-long-oos");
    document.getElementById("back-link").innerHTML = "<svg class='nhsuk-icon nhsuk-icon__chevron-left' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' aria-hidden='true' height='24' width='24'><path d='M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z'></path></svg>Go back to how long will the product or pack be out of stock";
    } else if ((whichReason == 'product divestment' || whichReason == 'takeover' || mergerProductChangeLink) && localStorage.getItem("supplier-extra-info") == 'yes') {
    document.getElementById("back-link").setAttribute('href', "contact-details-for-new-company/phone-number");
    document.getElementById("back-link").innerHTML = "<svg class='nhsuk-icon nhsuk-icon__chevron-left' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' aria-hidden='true' height='24' width='24'><path d='M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z'></path></svg>Go back to do you have a contact phone number for the supplier?";
    } else if ((whichReason == 'product divestment' || whichReason == 'takeover' || mergerProductChangeLink) && localStorage.getItem("supplier-extra-info") == 'no') {
    document.getElementById("back-link").setAttribute('href', "contact-details-for-new-company/extra-information");
    document.getElementById("back-link").innerHTML = "<svg class='nhsuk-icon nhsuk-icon__chevron-left' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' aria-hidden='true' height='24' width='24'><path d='M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z'></path></svg>Go back to additional supplier information";
    } else if ((whichReason == 'product divestment' || whichReason == 'takeover' || mergerProductChangeLink) && localStorage.getItem("supplier-extra-info") == 'no') {
    document.getElementById("back-link").setAttribute('href', "contact-details-for-new-company/extra-information");
    document.getElementById("back-link").innerHTML = "<svg class='nhsuk-icon nhsuk-icon__chevron-left' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' aria-hidden='true' height='24' width='24'><path d='M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z'></path></svg>Go back to additional supplier information";
    }
};
</script>

<script>
    console.log(localStorage);

    let checkAll = document.getElementsByClassName("nhsuk-checkboxes__input");

    let insetText = document.getElementById("inset-text-input");
     console.log(insetText);

  function checkAllBoxes() {
     for (let i = 0; i < checkAll.length; i++) {
       checkAll[i].checked = true;
     }
     let insetText = document.getElementById("inset-text-input");
     console.log(insetText);
     insetText.innerHTML =
     '<span class="nhsuk-u-visually-hidden">Information: </span>'
     +
     '<p>Deselect single packs from the search results or use this link to <a href="#" class="nhsuk-link nhsuk-link--no-visited-state" onclick="removeAllBoxes()">deselect all</a>.</p>';
  }

  function removeAllBoxes() {
     for (let i = 0; i < checkAll.length; i++) {
       checkAll[i].checked = false;
     }
     let insetText = document.getElementById("inset-text-input");
     insetText.innerHTML =
     '<span class="nhsuk-u-visually-hidden">Information: </span>'
     +
     '<p>Select single packs from the search results or use this link to <a class="nhsuk-link nhsuk-link--no-visited-state" href="#" onclick="checkAllBoxes()">select all</a>.</p>';
  }

  let discontinueReason = localStorage.getItem("discontinue-reason");

  let discontinueTitle = document.getElementById("discontinue-reason");

  let mergerProductChange = localStorage.getItem("change-company-name");

  if (discontinueReason || discontinueReason != null || discontinueReason != "") {
    discontinueTitle.innerHTML = 'Discontinue submission' + ': ' + discontinueReason +'<span class="nhsuk-u-visually-hidden"> - </span>';
  }

  if (mergerProductChange) {
     discontinueTitle.innerHTML = '<span class="nhsuk-caption-l" id="discontinue-reason">Company name change : company merger<span class="nhsuk-u-visually-hidden"> - </span></span>';
  }
</script>



{% endblock %}