{% extends "base.html" %}
{% block title %}
Select a product | Submit a product change | Portal | NHSBSA
{% endblock %}
{% block content %}

<div class="nhsuk-back-link nhsuk-u-margin-bottom-4">
    <a class="nhsuk-back-link__link" href="effective-date" id="back-link">
        <svg class="nhsuk-icon nhsuk-icon__chevron-left" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
             aria-hidden="true" height="24" width="24">
            <path d="M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z"></path>
        </svg>
        Go back to set the effective date</a>
</div>

<h1><span class="nhsuk-caption-l">
    Submit a pack change
  <span class="nhsuk-u-visually-hidden"> - </span>
</span>
    Select a pack</h1>
<p>This search contains all packs currently listed on dm+d. Select one product from this list to continue.</p>

<div class="nhsuk-form-group">

    <details class="nhsuk-details nhsuk-u-margin-bottom-6">
        <summary class="nhsuk-details__summary">
    <span class="nhsuk-details__summary-text">
      Filter results
    </span>
        </summary>
        <div class="nhsuk-details__text">
            <label class="nhsuk-label" for="example">Pack name (optional)</label>
            <input class="nhsuk-input" id="example" name="example" type="text">
            <button class="nhsuk-button nhsuk-button--secondary nhsuk-u-margin-top-4" type="submit">
                Search
                <span class="nhsuk-u-visually-hidden">Search</span>
            </button>
        </div>
    </details>

    <div class="nhsuk-body-m flex--space-between" style="display: flex">
        <div class="nhsuk-u-visually-hidden">Currently viewing</div>
        <div id="pageAndResultCount">Page 1 of 1 (5 results)</div>
    </div>


    <table role="table" class="nhsuk-table-responsive nhsuk-u-margin-bottom-5">
        <caption class="nhsuk-table__caption">Summary of packs</caption>
        <thead role="rowgroup" class="nhsuk-table__head">
        <tr role="row">
            <th role="columnheader" class="" scope="col">
                Product name
            </th>
            <th role="columnheader" class="" scope="col">
                Pack size
            </th>
            <th role="columnheader" class="" scope="col">
                Subpack size
            </th>
            <th role="columnheader" class="" scope="col">
                Select
            </th>
        </tr>
        </thead>
        <tbody class="nhsuk-table__body">
        <tr role="row" class="nhsuk-table__row" id="delete-row">
            <td role="cell" class="nhsuk-table__cell">
                <span class="nhsuk-table-responsive__heading">Product name </span>
                <span id="product-1">Alprazolam</span>
            </td>
            <td role="cell" class="nhsuk-table__cell">
                <span class="nhsuk-table-responsive__heading">Pack </span>
                <span id="pack-size-1">30</span>
            </td>
            <td role="cell" class="nhsuk-table__cell">
                <span class="nhsuk-table-responsive__heading">Subpack </span>
                <span id="subpack-1">2 &times; 15</span></td>
            <td>
                <p class="nhsuk-u-margin-bottom-0"><a href="reason.html" class="nhsuk-link nhsuk-link--no-visited-state"
                                                      id="select-product-1">Select</a></p><span
                    class="nhsuk-table-responsive__heading">Select </span>


            </td>
        </tr>
        <tr role="row" class="nhsuk-table__row">
            <td role="cell" class="nhsuk-table__cell">
                <span class="nhsuk-table-responsive__heading">Product name </span>
                <span id="product-2">Bupenorphine 100mg capsules</span>
            </td>
            <td role="cell" class="nhsuk-table__cell">
                <span class="nhsuk-table-responsive__heading">Pack </span>
                <span id="pack-size-2">28</span>
            </td>
            <td role="cell" class="nhsuk-table__cell">
                <span class="nhsuk-table-responsive__heading">Subpack </span>
                <span id="subpack-2">2 &times; 14</span>
            </td>
            <td>
                <p class="nhsuk-u-margin-bottom-0"><a href="reason.html" class="nhsuk-link nhsuk-link--no-visited-state"
                                                      id="select-product-2">Select</a></p><span
                    class="nhsuk-table-responsive__heading">Select </span>


            </td>
        </tr>
        <tr role="row" class="nhsuk-table__row">
            <td role="cell" class="nhsuk-table__cell">
                <span class="nhsuk-table-responsive__heading">Product name </span>
                <span id="product-3">Protein cornflakes</span>
            </td>
            <td role="cell" class="nhsuk-table__cell">
                <span class="nhsuk-table-responsive__heading">Pack </span>
                <span id="pack-size-3">1</span>
            </td>
            <td role="cell" class="nhsuk-table__cell">
                <span class="nhsuk-table-responsive__heading">Subpack </span>
                <!--          need to make sure empty table cells announce something MPL 20/10/22-->
                <span class="nhsuk-u-visually-hidden">No Subpack information</span>
            </td>
            <td>
                <p class="nhsuk-u-margin-bottom-0"><a href="reason.html" class="nhsuk-link nhsuk-link--no-visited-state"
                                                      id="select-product-3">Select</a></p><span
                    class="nhsuk-table-responsive__heading">Select </span>


            </td>
        </tr>
        <tr role="row" class="nhsuk-table__row">
            <td role="cell" class="nhsuk-table__cell">
                <span class="nhsuk-table-responsive__heading">Product name </span>
                <span id="product-4">Boots Strawberry Pain Relief 3 Months Plus Paracetamol 120mg/5ml oral suspension</span>
            </td>
            <td role="cell" class="nhsuk-table__cell">
                <span class="nhsuk-table-responsive__heading">Pack </span>
                <span id="pack-size-4">30</span>
            </td>
            <td role="cell" class="nhsuk-table__cell">
                <span class="nhsuk-table-responsive__heading">Subpack </span>
                <span id="subpack-4">3 &times; 10</span>
            </td>
            <td>
                <p class="nhsuk-u-margin-bottom-0"><a href="reason.html" class="nhsuk-link nhsuk-link--no-visited-state"
                                                      id="select-product-4">Select</a></p><span
                    class="nhsuk-table-responsive__heading">Select </span>


            </td>
        </tr>
        </tbody>
    </table>
    <!--  </div>-->
    <!--</div>-->
    <div class="nhsuk-grid-row nhsuk-u-margin-top-3">
        <div class="nhsuk-grid-column-full">
            <nav class="govuk-pagination" role="navigation" aria-label="results">
                <div class="govuk-pagination__prev">
                    <a class="govuk-link govuk-pagination__link" href="#" rel="prev">
                        <svg class="govuk-pagination__icon govuk-pagination__icon--prev"
                             xmlns="http://www.w3.org/2000/svg" height="13" width="15" aria-hidden="true"
                             focusable="false" viewBox="0 0 15 13">
                            <path d="m6.5938-0.0078125-6.7266 6.7266 6.7441 6.4062 1.377-1.449-4.1856-3.9768h12.896v-2h-12.984l4.2931-4.293-1.414-1.414z"></path>
                        </svg>
                        <span class="govuk-pagination__link-title">Previous</span></a>
                </div>
                <ul class="govuk-pagination__list">
                    <li class="govuk-pagination__item">
                        <a class="govuk-link govuk-pagination__link" href="#" aria-label="Page 1">
                            1
                        </a>
                    </li>
                    <li class="govuk-pagination__item govuk-pagination__item--current">
                        <a class="govuk-link govuk-pagination__link" href="#" aria-label="Page 2" aria-current="page">
                            2
                        </a>
                    </li>
                    <li class="govuk-pagination__item">
                        <a class="govuk-link govuk-pagination__link" href="#" aria-label="Page 3">
                            3
                        </a>
                    </li>
                </ul>
                <div class="govuk-pagination__next">
                    <a class="govuk-link govuk-pagination__link" href="#" rel="next"> <span
                            class="govuk-pagination__link-title">Next</span>
                        <svg class="govuk-pagination__icon govuk-pagination__icon--next"
                             xmlns="http://www.w3.org/2000/svg" height="13" width="15" aria-hidden="true"
                             focusable="false" viewBox="0 0 15 13">
                            <path d="m8.107-0.0078125-1.4136 1.414 4.2926 4.293h-12.986v2h12.896l-4.1855 3.9766 1.377 1.4492 6.7441-6.4062-6.7246-6.7266z"></path>
                        </svg>
                    </a>
                </div>
            </nav>
        </div>
    </div>
</div>

<script>
    console.log(localStorage);

    let insetText = document.getElementById("inset-text-input");
    console.log(insetText);

    let selectLinks = document.getElementsByClassName("nhsuk-link");
    console.log(selectLinks);


    for (const element of selectLinks) {
        element.addEventListener('keydown', (e) => {
            console.log(e);
            if (element.id == e.target.id) {
                let splitId = e.target.id.split("-");
                let productNameId = splitId[1] + '-' + splitId[2];
                let packSizeId = 'pack-size-' + splitId[2];
                let subpackId = 'subpack-' + splitId[2];
                console.log('productNameId', productNameId);
                localStorage.setItem("pack-name", document.getElementById(productNameId).textContent);
                localStorage.setItem("pack-size", document.getElementById(packSizeId).textContent);
                if (subpackId) {
                    localStorage.setItem("pack-subpack", document.getElementById(subpackId).textContent);
                }
                    if (localStorage.getItem("product-change-summary") == 'product-change-summary') {
                        e.target.href = "summary";
                        console.log(e.target.href);
                    }
                }
            }
        )

            element.addEventListener('click', (e) => {
                console.log(e);
                if (element.id == e.target.id) {
                    let splitId = e.target.id.split("-");
                    let productNameId = splitId[1] + '-' + splitId[2];
                    let packSizeId = 'pack-size-' + splitId[2];
                    let subpackId = 'subpack-' + splitId[2];
                    console.log('productNameId', productNameId);
                    localStorage.setItem("pack-name", document.getElementById(productNameId).textContent);
                    localStorage.setItem("pack-size", document.getElementById(packSizeId).textContent);
                    if (subpackId) {
                        localStorage.setItem("pack-subpack", document.getElementById(subpackId).textContent);
                    }

                    if (localStorage.getItem("product-change-summary") == 'product-change-summary') {
                        e.target.href = "summary";
                        console.log(e.target.href);
                    }
                }
            })
        }


</script>


{% endblock %}