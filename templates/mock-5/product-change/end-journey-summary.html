{% extends "base.html" %}
{% block title %}
Review details | Submit a product change | Portal | NHSBSA
{% endblock %}
{% block content %}

<div class="nhsuk-back-link nhsuk-u-margin-bottom-4">
  <a class="nhsuk-back-link__link" href="reason">
    <svg class="nhsuk-icon nhsuk-icon__chevron-left" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" height="24" width="24">
      <path d="M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z"></path>
    </svg>
    Go back to select reason for product change</a>
</div>

<h1><span class="nhsuk-caption-l">
    Submit a product change
  <span class="nhsuk-u-visually-hidden"> - </span>
</span>
  Review details</h1>

<p>Before continuing with this product change, please check that the following details are correct. </p>

<dl class="nhsuk-summary-list nhsuk-u-margin-top-6">

  <div class="nhsuk-summary-list__row">
    <dt class="nhsuk-summary-list__key">
      Effective date
    </dt>
    <dd class="nhsuk-summary-list__value" id="pack-effective-date">15 November 2023
    </dd>

    <dd class="nhsuk-summary-list__actions">

      <a href="effective-date">
        Change<span class="nhsuk-u-visually-hidden">&nbsp; effective date</span>
      </a>

    </dd>

  </div>

  <div class="nhsuk-summary-list__row">
    <dt class="nhsuk-summary-list__key">
      Product name
    </dt>
    <dd class="nhsuk-summary-list__value" id="product-name">
      No product name
    </dd>

    <dd class="nhsuk-summary-list__actions">

      <a href="amend-product">
        Change<span class="nhsuk-u-visually-hidden">&nbsp;product name</span>
      </a>

    </dd>

  </div>

  <div class="nhsuk-summary-list__row">
    <dt class="nhsuk-summary-list__key">
      Product change reason
    </dt>
    <dd class="nhsuk-summary-list__value" id="product-change-reason">
      No reason listed
    </dd>

    <dd class="nhsuk-summary-list__actions">

      <a href="reason">
        Change<span class="nhsuk-u-visually-hidden">&nbsp; reason for product change</span>
      </a>

    </dd>

  </div>
  <div class="nhsuk-summary-list__row">
    <dt class="nhsuk-summary-list__key">
      product name change reason
    </dt>
    <dd class="nhsuk-summary-list__value" id="product-name-change-reason">
      New supplier so new name
    </dd>

    <dd class="nhsuk-summary-list__actions">

      <a href="reason">
        Change<span class="nhsuk-u-visually-hidden">&nbsp; reason for name change</span>
      </a>

    </dd>

  </div>
  
</dl>

<a class="nhsuk-button nhsuk-u-margin-right-0" href="reason-product-name/product-spc" id="continue-button">Continue with product change</a>


<script>
localStorage.setItem("product-change-summary", "product-change-summary");

console.log(localStorage);

var getEffectiveDay = localStorage.getItem("effective-day");
var getEffectiveMonth = localStorage.getItem("effective-month");
var getEffectiveYear = localStorage.getItem("effective-year");
var getProductName = localStorage.getItem("product-name");
var getProductChangeReason = localStorage.getItem("product-change-reason");

var continueButton = document.getElementById("continue-button");

if (getEffectiveDay != '' || getEffectiveMonth != '' || getEffectiveYear != '') {
console.log('setting month');
var getLongMonth = Intl.DateTimeFormat('en', { month: 'long' }).format(new Date(getEffectiveMonth));
let formalDate = getEffectiveDay + ' ' + getLongMonth + ' ' + getEffectiveYear;
document.getElementById("pack-effective-date").innerHTML = getEffectiveDay + ' ' + getLongMonth + ' ' + getEffectiveYear;
} else {
  document.getElementById("pack-effective-date").innerHTML = '15 November 2023';
}


   if (getProductName) {
    document.getElementById("product-name").innerHTML = getProductName;
   }
   if (getProductChangeReason) {
    document.getElementById("product-change-reason").innerHTML = getProductChangeReason;
   }

   if (getProductChangeReason == 'product name') {
     continueButton.href = "reason-product-name/product-name"
   } else if (getProductChangeReason == "licensing authority") {
     continueButton.href = "reason-licensing-authority/licensing-authority"
   } else if (getProductChangeReason == "market authorisation number") {
     continueButton.href = "reason-market-auth-number/market-auth-number"
   } else if (getProductChangeReason == "licensed route") {
     continueButton.href = "reason-licensed-route/licensed-route"
   }





</script>

{% endblock %}